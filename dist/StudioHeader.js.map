{"version":3,"sources":["../src/StudioHeader.jsx"],"names":["React","useContext","PropTypes","injectIntl","intlShape","AppContext","APP_CONFIG_INITIALIZED","ensureConfig","getConfig","mergeConfig","subscribe","ActionRow","Menu","MenuTrigger","MenuContent","Avatar","LinkedLogo","Logo","CaretIcon","messages","AUTHN_MINIMAL_HEADER","process","env","StudioDesktopHeaderBase","props","userMenu","avatar","username","intl","formatMessage","map","type","href","content","loggedOutItems","item","i","arr","length","logo","logoAltText","logoDestination","loggedIn","actionRowContent","logoProps","src","alt","logoClasses","renderUserMenu","renderLoggedOutItems","Component","propTypes","arrayOf","shape","oneOf","string","bool","element","isRequired","defaultProps","StudioDesktopHeader","StudioHeader","authenticatedUser","config","STUDIO_BASE_URL","LOGOUT_URL","LOGO_URL","SITE_NAME"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport {\n  APP_CONFIG_INITIALIZED,\n  ensureConfig,\n  getConfig,\n  mergeConfig,\n  subscribe,\n} from '@edx/frontend-platform';\nimport { ActionRow } from '@edx/paragon';\n\nimport { Menu, MenuTrigger, MenuContent } from './Menu';\nimport Avatar from './Avatar';\nimport { LinkedLogo, Logo } from './Logo';\n\nimport { CaretIcon } from './Icons';\n\nimport messages from './Header.messages';\n\nensureConfig([\n  'STUDIO_BASE_URL',\n  'LOGOUT_URL',\n  'LOGIN_URL',\n  'SITE_NAME',\n  'LOGO_URL',\n  'ORDER_HISTORY_URL',\n], 'StudioHeader component');\n\nsubscribe(APP_CONFIG_INITIALIZED, () => {\n  mergeConfig({\n    AUTHN_MINIMAL_HEADER: !!process.env.AUTHN_MINIMAL_HEADER,\n  }, 'StudioHeader additional config');\n});\n\nclass StudioDesktopHeaderBase extends React.Component {\n  constructor(props) { // eslint-disable-line no-useless-constructor\n    super(props);\n  }\n\n  renderUserMenu() {\n    const {\n      userMenu,\n      avatar,\n      username,\n      intl,\n    } = this.props;\n\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger\n          tag=\"button\"\n          aria-label={intl.formatMessage(messages['header.label.account.menu.for'], { username })}\n          className=\"btn btn-outline-primary d-inline-flex align-items-center pl-2 pr-3\"\n        >\n          <Avatar size=\"1.5em\" src={avatar} alt=\"\" className=\"mr-2\" />\n          {username} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {userMenu.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderLoggedOutItems() {\n    const { loggedOutItems } = this.props;\n\n    return loggedOutItems.map((item, i, arr) => (\n      <a\n        key={`${item.type}-${item.content}`}\n        className={i < arr.length - 1 ? 'btn mr-2 btn-link' : 'btn mr-2 btn-outline-primary'}\n        href={item.href}\n      >\n        {item.content}\n      </a>\n    ));\n  }\n\n  render() {\n    const {\n      logo,\n      logoAltText,\n      logoDestination,\n      loggedIn,\n      intl,\n      actionRowContent,\n    } = this.props;\n    const logoProps = { src: logo, alt: logoAltText, href: logoDestination };\n    const logoClasses = getConfig().AUTHN_MINIMAL_HEADER ? 'mw-100' : null;\n\n    return (\n      <header className=\"site-header-desktop\">\n        <a className=\"nav-skip sr-only sr-only-focusable\" href=\"#main\">{intl.formatMessage(messages['header.label.skip.nav'])}</a>\n        <div className={`container-fluid ${logoClasses}`}>\n          <div className=\"nav-container position-relative d-flex align-items-center\">\n            {logoDestination === null ? <Logo className=\"logo\" src={logo} alt={logoAltText} /> : <LinkedLogo className=\"logo\" {...logoProps} />}\n            <ActionRow>\n              {actionRowContent}\n              <nav\n                aria-label={intl.formatMessage(messages['header.label.secondary.nav'])}\n                className=\"nav secondary-menu-container align-items-center ml-auto\"\n              >\n                {loggedIn ? this.renderUserMenu() : this.renderLoggedOutItems()}\n              </nav>\n            </ActionRow>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nStudioDesktopHeaderBase.propTypes = {\n  userMenu: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  loggedOutItems: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  logo: PropTypes.string,\n  logoAltText: PropTypes.string,\n  logoDestination: PropTypes.string,\n  avatar: PropTypes.string,\n  username: PropTypes.string,\n  loggedIn: PropTypes.bool,\n  actionRowContent: PropTypes.element,\n\n  // i18n\n  intl: intlShape.isRequired,\n};\n\nStudioDesktopHeaderBase.defaultProps = {\n  userMenu: [],\n  loggedOutItems: [],\n  logo: null,\n  logoAltText: null,\n  logoDestination: null,\n  avatar: null,\n  username: null,\n  loggedIn: false,\n  actionRowContent: null,\n};\n\nconst StudioDesktopHeader = injectIntl(StudioDesktopHeaderBase);\n\nfunction StudioHeader({ intl, actionRowContent }) {\n  const { authenticatedUser, config } = useContext(AppContext);\n\n  const userMenu = authenticatedUser === null ? [] : [\n    {\n      type: 'item',\n      href: `${config.STUDIO_BASE_URL}`,\n      content: intl.formatMessage(messages['header.user.menu.studio.home']),\n    },\n    {\n      type: 'item',\n      href: `${config.STUDIO_BASE_URL}/maintenance`,\n      content: intl.formatMessage(messages['header.user.menu.studio.maintenance']),\n    },\n    {\n      type: 'item',\n      href: config.LOGOUT_URL,\n      content: intl.formatMessage(messages['header.user.menu.logout']),\n    },\n  ];\n\n  const props = {\n    logo: config.LOGO_URL,\n    logoAltText: config.SITE_NAME,\n    logoDestination: config.STUDIO_BASE_URL,\n    loggedIn: authenticatedUser !== null,\n    username: authenticatedUser !== null ? authenticatedUser.username : null,\n    avatar: authenticatedUser !== null ? authenticatedUser.avatar : null,\n    actionRowContent,\n    userMenu,\n    loggedOutItems: [],\n  };\n\n  return <StudioDesktopHeader {...props} />;\n}\n\nStudioHeader.propTypes = {\n  intl: intlShape.isRequired,\n  actionRowContent: PropTypes.element,\n};\n\nStudioHeader.defaultProps = {\n  actionRowContent: <></>,\n};\n\nexport default injectIntl(StudioHeader);\n"],"file":"StudioHeader.js"}